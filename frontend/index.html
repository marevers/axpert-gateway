<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Axpert Gateway Control</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🔋</text></svg>">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🔋 Axpert Gateway Control</h1>
            <p>Control your solar inverters remotely</p>
        </header>

        <div class="inverter-selector">
            <label for="inverterSelect">Select Inverter:</label>
            <select id="inverterSelect">
                <option value="">Loading inverters...</option>
            </select>
        </div>

        <div class="control-sections">
            <!-- Output Priority Section -->
            <section class="control-section">
                <h2>⚡ Output Priority</h2>
                <p>Set the output source priority for the inverter</p>
                <div class="button-group">
                    <button class="control-btn" data-command="setOutputPriority" data-value="utility">
                        🏠 Utility First
                    </button>
                    <button class="control-btn" data-command="setOutputPriority" data-value="solar">
                        ☀️ Solar First
                    </button>
                    <button class="control-btn" data-command="setOutputPriority" data-value="sbu">
                        🔋 SBU First
                    </button>
                </div>
            </section>

            <!-- Charger Priority Section -->
            <section class="control-section">
                <h2>🔌 Charger Priority</h2>
                <p>Set the charger source priority for the inverter</p>
                <div class="button-group">
                    <button class="control-btn" data-command="setChargerPriority" data-value="utilityfirst">
                        🏠 Utility First
                    </button>
                    <button class="control-btn" data-command="setChargerPriority" data-value="solarfirst">
                        ☀️ Solar First
                    </button>
                    <button class="control-btn" data-command="setChargerPriority" data-value="solarandutility">
                        🔄 Solar & Utility
                    </button>
                    <button class="control-btn" data-command="setChargerPriority" data-value="solaronly">
                        ☀️ Solar Only
                    </button>
                </div>
            </section>

            <!-- Max Charge Current Section -->
            <!-- TODO: Currently hidden as it is non-working -->
            <!-- <section class="control-section">
                <h2>⚡ Max Charge Current</h2>
                <p>Set the maximum AC charge current (Amperes)</p>
                <div class="input-group">
                    <input 
                        type="number" 
                        id="chargeCurrentInput" 
                        min="1" 
                        max="100" 
                        placeholder="Enter amperes (1-100)"
                        class="current-input"
                    >
                    <button class="control-btn primary" id="setChargeCurrentBtn">
                        Set Current
                    </button>
                </div>
            </section> -->
        </div>

        <!-- Status Display -->
        <div id="statusDisplay" class="status-display hidden">
            <div class="status-content">
                <span class="status-icon"></span>
                <span class="status-message"></span>
            </div>
        </div>

        <!-- Confirmation Modal -->
        <div id="confirmationModal" class="modal hidden">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>⚠️ Confirm Inverter Command</h3>
                </div>
                <div class="modal-body">
                    <div class="command-details">
                        <div class="detail-row">
                            <span class="detail-label">Inverter:</span>
                            <span class="detail-value" id="modalInverter"></span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Command:</span>
                            <span class="detail-value" id="modalCommand"></span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Value:</span>
                            <span class="detail-value" id="modalValue"></span>
                        </div>
                    </div>
                    <div class="warning-message">
                        <p>⚠️ This will change your inverter settings immediately.</p>
                        <p>Are you sure you want to proceed?</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="modal-btn cancel-btn" id="modalCancel">Cancel</button>
                    <button class="modal-btn confirm-btn" id="modalConfirm">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
